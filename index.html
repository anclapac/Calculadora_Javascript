<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="estilo.css">
    <title>Calculadora CORE</title>

    <script>
const valida = () => {
    return !Number.isNaN(numero());
}

const numero  = () => Number(document.getElementById("pantalla").value);
const pinta   =  v => document.getElementById("pantalla").value = v;
const vaciar  = () => pinta("");

const rellenar_info = () => {
    const n=numero();
    let msg="";
    if(!valida()){
        msg="Error";
    }
    else{
        if(n<100){
            msg="Info: El resultado es menor que 100";
        }else if(n<=200){
            msg="Info: El resultado está entre 100 y 200";
        }else{
            msg="Info: El resultado es superior a 200";
        }
    }
    document.getElementById("info").innerHTML= msg;
}

const sq = () => {
    if(!valida()){
        pinta("Error");
        return;
    }
    let n=numero();
    pinta(n*n);
    rellenar_info();
}

const fact = () => {
    if(!valida()){
        pinta("Error");
        return;
    }
    let n=numero();
    let f=1;
    for(let i=n; i>1 ;i--)
        f*=i;
    pinta(f);
    rellenar_info();
}

const sqr = () => {
    if(!valida()){
        pinta("Error");
        return;
    }
    let n=numero();
    pinta(Math.sqrt(n));
    rellenar_info();
}

let acumulador=0;
let operador="";

const add = () => {
    if(!valida()){
        pinta("Error");
        return;
    }
    const n=numero();
    actualiza(n,"+");
    vaciar();
    rellenar_info();
} 

const sub=()=>{
    if(!valida()){
        pinta("Error");
        return;
    }
    const n=numero();
    actualiza(n,"-");
    vaciar();
    rellenar_info();
}

const mul = () => {
    if(!valida()){
        pinta("Error");
        return;
    }
    const n=numero();
    actualiza(n,"*");
    vaciar();
    rellenar_info();
} 

const div = () => {
    if(!valida()){
        pinta("Error");
        return;
    }
    const n=numero();
    actualiza(n,"/");
    vaciar();
    rellenar_info();
} 

const eq = () => {
    if(!valida()){
        pinta("Error");
        return;
    }
    const n=numero();
    const res=eval(acumulador+operador+n);
    pinta(res);
    rellenar_info();
}

const actualiza = (n,op) => {
    if(operador =="+"){
        acumulador=n;
        operador=op;
    }else if(operador =="-"){
        acumulador=n;
        operador=op;
    }else if(operador =="*"){
        acumulador=n;
        operador=op;
    }else if(operador =="/"){
        acumulador=n;
        operador=op;
    }else if(operador ==""){
        acumulador=n;
        operador=op;
    }
}

document.addEventListener("load" , () => {
document.getElementById("pantalla").addEventListener("click", vaciar);
document.getElementById("cuadrado").addEventListener("click", sq);
document.getElementById("factorial").addEventListener("click", fact);
document.getElementById("raiz").addEventListener("click", sqr);
document.getElementById("suma").addEventListener("click", add);
document.getElementById("resta").addEventListener("click", sub);
document.getElementById("multiplicacion").addEventListener("click", mul);
document.getElementById("division").addEventListener("click", div);
document.getElementById("igual").addEventListener("click", eq);
})
    </script>
</head>

<body>
    <h2 class="cabecera"> Calculadora de CORE</h2>
    <div id="calculadora">
        Número: 
        <input type="text" id="pantalla">
        <h2 id="info" class="grande" title="Info sobre el número"> Info sobre el número </h2>
        <p id="operaciones_unitarias"><b>Operaciones Unitarias</b>
            <div>
                <button id="cuadrado">x <sup>2</sup> </button>
                <button id="factorial">x! </button>
                <button id="raiz">sqr </button>
            </div>
        </p>
        
        <p id="operaciones_binarias"><b>Operaciones Binarias</b>
            <div>
                <button id="suma">x &plus; y </button>
                <button id="resta">x &minus; y </button>
                <button id="multiplicacion">x &ast; y </button>
                <button id="division">x &sol; y </button>
                <button id="igual"> = </button>
            </div>
        </p>
    </div>
</body>
</html>